allOf:
  - $ref: ./BankAccountBase.yaml
  - properties:
      userId:
        type: string
        example: User:019542f5-b3e7-1d02-0000-000000000001
      status:
        type: string
        description: Status of the external account
      beneficiary:
        description: Beneficiary of the account 
        oneOf:
          - title: Business Counterparty
            $ref: ../counterparty/BusinessCounterParty.yaml
          - title: Individual Counterparty
            $ref: ../counterparty/IndividualCounterParty.yaml
        discriminator:
          propertyName: counterpartyType
          mapping:
            INDIVIDUAL_COUNTERPARTY: ../counterparty/BusinessCounterParty.yaml
            BUSINESS_COUNTERPARTY: ../counterparty/IndividualCounterParty.yaml
          