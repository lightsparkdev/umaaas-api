get:
  summary: List all transfer-out requests
  description: >
    Retrieve a list of transfer-out requests with optional filtering parameters. Returns all
    transfer-out requests that match the specified filters. If no filters are provided, returns all 
    transfer-out requests (paginated).
  operationId: listTransferOut
  tags:
    - Transfer Out
  security:
    - BasicAuth: []
  parameters:
    - name: customerId
      in: query
      description: Filter by customer ID
      required: false
      schema:
        type: string
    - name: status
      in: query
      description: Filter by transfer status
      required: false
      schema:
        $ref: ../../components/schemas/transfers/TransferStatus.yaml
    - name: sourceAccountId
      in: query
      description: Filter by source internal account ID
      required: false
      schema:
        type: string
    - name: destinationAccountId
      in: query
      description: Filter by destination external account ID
      required: false
      schema:
        type: string
    - name: limit
      in: query
      description: Maximum number of results to return (default 20, max 100)
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    - name: cursor
      in: query
      description: Cursor for pagination (returned from previous request)
      required: false
      schema:
        type: string
  responses:
    "200":
      description: Successful operation
      content:
        application/json:
          schema:
            type: object
            required:
              - data
              - hasMore
            properties:
              data:
                type: array
                description: List of transfer-out requests matching the filter criteria
                items:
                  allOf:
                    - $ref: ../../components/schemas/transfers/Transfer.yaml
                    - type: object
                      properties:
                        source:
                          type: object
                          properties:
                            accountId:
                              type: string
                              description: Internal account ID
                              example: a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
                        destination:
                          type: object
                          properties:
                            accountId:
                              type: string
                              description: External account ID
                              example: e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              hasMore:
                type: boolean
                description: Indicates if more results are available beyond this page
              nextCursor:
                type: string
                description: >-
                  Cursor to retrieve the next page of results (only present if
                  hasMore is true)
              totalCount:
                type: integer
                description: >-
                  Total number of transfer-out requests matching the criteria (excluding
                  pagination)
    "400":
      description: Bad request - Invalid parameters
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error400.yaml
    "401":
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error401.yaml
    "500":
      description: Internal service error
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error500.yaml

post:
  summary: Create a transfer-out request
  description: >
    Transfer funds from an internal account to an external account for a specific customer
  operationId: createTransferOut
  tags:
    - Transfer Out
  security:
    - BasicAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - customerId
            - source
            - destination
          properties:
            customerId:
              type: string
              description: The ID of the customer initiating the transfer
              example: User:019542f5-b3e7-1d02-0000-000000000001
            source:
              type: object
              required:
                - accountId
              properties:
                accountId:
                  type: string
                  description: Reference to an internal account ID
                  example: a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
              description: Source internal account details
            destination:
              type: object
              required:
                - accountId
              properties:
                accountId:
                  type: string
                  description: Reference to an external account ID
                  example: e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              description: Destination external account details
        examples:
          transferOut:
            summary: Transfer from internal to external account
            value:
              customerId: User:019542f5-b3e7-1d02-0000-000000000001
              source:
                accountId: a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
              destination:
                accountId: e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
  responses:
    "201":
      description: Transfer-out request created successfully
      content:
        application/json:
          schema:
            allOf:
              - $ref: ../../components/schemas/transfers/Transfer.yaml
              - type: object
                properties:
                  source:
                    type: object
                    properties:
                      accountId:
                        type: string
                        description: Internal account ID
                        example: a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
                  destination:
                    type: object
                    properties:
                      accountId:
                        type: string
                        description: External account ID
                        example: e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
    "400":
      description: Bad request - Invalid parameters
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error400.yaml
    "401":
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error401.yaml
    "404":
      description: Customer or account not found
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error404.yaml
    "500":
      description: Internal service error
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error500.yaml
