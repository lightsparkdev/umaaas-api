post:
  summary: Create a transfer quote
  description: |
    Generate a quote for a cross-currency transfer between any combination of accounts
    and UMA addresses. This endpoint handles currency exchange and provides the necessary
    instructions to execute the transfer.

    **Transfer Types Supported:**
    - **Account to Account**: Transfer between internal/external accounts with currency exchange.
    - **Account to UMA**: Transfer from an internal account to an UMA address.
    - **UMA to Account or UMA to UMA**: This transfer type will only be funded by payment instructions, not from an internal account.

    **Key Features:**
    - **Flexible Amount Locking**: Always specify whether you want to lock the sending amount or receiving amount
    - **Currency Exchange**: Handles all cross-currency transfers with real-time exchange rates
    - **Payment Instructions**: For UMA or customer ID sources, provides banking details needed for execution

    **Important:** If you are transferring funds in the same currency (no exchange required), 
    use the `/transfer-in` or `/transfer-out` endpoints instead.
  operationId: createQuote
  tags:
    - Cross-Currency Transfers
  security:
    - BasicAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: ../../components/schemas/quotes/QuoteRequest.yaml
        examples:
          accountToAccount:
            summary: Account to Account Transfer
            value:
              source:
                accountId: InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              destination:
                accountId: ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
                currency: EUR
              lockedCurrencySide: SENDING
              lockedCurrencyAmount: 10000
              description: 'Transfer between accounts, either internal or external.'
          accountToUma:
            summary: Account to UMA Address Transfer
            value:
              lookupId: LookupRequest:019542f5-b3e7-1d02-0000-000000000009
              source:
                accountId: InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              destination:
                umaAddress: $receiver@uma.domain.com
                currency: EUR
              lockedCurrencySide: SENDING
              lockedCurrencyAmount: 1000
              description: 'Payment for invoice #1234'
          realTimeFundingToSparkWallet:
            summary: Real-time funding to Spark Wallet as an on-ramp flow. Immediate execution.
            value:
              source:
                customerId: Customer:019542f5-b3e7-1d02-0000-000000000009
                currency: USD
              destination:
                externalAccountDetails:
                  customerId: Customer:019542f5-b3e7-1d02-0000-000000000001
                  currency: BTC
                  accountInfo:
                    accountType: SPARK_WALLET
                    address: sprt1pgssyuuuhnrrdjswal5c3s3rafw9w3y5dd4cjy3duxlf7hjzkp0rqx6dj6mrhu
              lockedCurrencySide: RECEIVING
              lockedCurrencyAmount: 10000
              immediatelyExecute: true
              description: 'Bitcoin reward payout!'
  responses:
    '201':
      description: |
        Transfer quote created successfully. The response includes exchange rates, 
        fees, and transfer details. For transfers involving UMA addresses, payment 
        instructions are also included for execution through banking systems.
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/quotes/Quote.yaml
    '400':
      description: Bad request - Missing or invalid parameters
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error400.yaml
    '401':
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error401.yaml
    '412':
      description: Counterparty doesn't support UMA version
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error412.yaml
    '424':
      description: Counterparty issue
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error424.yaml
    '500':
      description: Internal service error
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error500.yaml
    '501':
      description: Not implemented
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error501.yaml
get:
  summary: List transfer quotes
  description: |
    Retrieve a list of transfer quotes with optional filtering parameters. Returns all
    quotes that match the specified filters. If no filters are provided, returns all quotes
    (paginated).
  operationId: listQuotes
  tags:
    - Cross-Currency Transfers
  security:
    - BasicAuth: []
  parameters:
    - name: customerId
      in: query
      description: Filter by sending customer ID
      required: false
      schema:
        type: string
    - name: sendingAccountId
      in: query
      description: Filter by sending account ID
      required: false
      schema:
        type: string
    - name: receivingAccountId
      in: query
      description: Filter by receiving account ID
      required: false
      schema:
        type: string
    - name: sendingUmaAddress
      in: query
      description: Filter by sending UMA address
      required: false
      schema:
        type: string
    - name: receivingUmaAddress
      in: query
      description: Filter by receiving UMA address
      required: false
      schema:
        type: string
    - name: status
      in: query
      description: Filter by quote status
      required: false
      schema:
        type: string
        enum:
          - PENDING
          - PROCESSING
          - COMPLETED
          - FAILED
          - EXPIRED
    - name: createdAfter
      in: query
      description: Filter quotes created after this timestamp (inclusive)
      required: false
      schema:
        type: string
        format: date-time
    - name: createdBefore
      in: query
      description: Filter quotes created before this timestamp (inclusive)
      required: false
      schema:
        type: string
        format: date-time
    - name: limit
      in: query
      description: Maximum number of results to return (default 20, max 100)
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    - name: cursor
      in: query
      description: Cursor for pagination (returned from previous request)
      required: false
      schema:
        type: string
  responses:
    '200':
      description: Successful operation
      content:
        application/json:
          schema:
            type: object
            required:
              - data
              - hasMore
            properties:
              data:
                type: array
                description: List of quotes matching the criteria
                items:
                  $ref: ../../components/schemas/quotes/Quote.yaml
              hasMore:
                type: boolean
                description: Indicates if more results are available beyond this page
              nextCursor:
                type: string
                description: >-
                  Cursor to retrieve the next page of results (only present if
                  hasMore is true)
              totalCount:
                type: integer
                description: >-
                  Total number of quotes matching the criteria (excluding
                  pagination)
    '400':
      description: Bad request - Invalid parameters
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error400.yaml
    '401':
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error401.yaml
    '500':
      description: Internal service error
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error500.yaml