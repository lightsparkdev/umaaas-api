---
title: "Setting Up External Accounts"
description: "Learn how to add and manage external bank accounts for customer withdrawals and payments"
---

## Overview

External accounts represent customer-owned bank accounts, cryptocurrency wallets, or other payment destinations outside the Grid platform. They serve as withdrawal destinations where you can send funds from internal accounts.

External accounts enable you to:

- **Send withdrawals**: Transfer funds from internal accounts to customer bank accounts
- **Pay recipients**: Send cross-currency payments to external destinations
- **Support multiple currencies**: Add accounts for different fiat currencies, cryptocurrencies, and payment rails

<Info>
  External accounts must be linked to a customer and include beneficiary
  information for compliance purposes.
</Info>

## How external accounts work

External accounts function as registered payout destinations in your payment flows:

1. **Register account**: Add external account details including beneficiary information and bank account data
2. **Verify status**: Account undergoes review and moves to `ACTIVE` status
3. **Send payments**: Use the external account as a destination in quotes or same-currency transfers
4. **Track transactions**: Monitor payment status via webhooks and transaction queries

Each external account:

- Is linked to a specific customer
- Has a status lifecycle (`PENDING` → `ACTIVE`, `UNDER_REVIEW`, or `INACTIVE`)
- Includes beneficiary details (individual or business)
- Supports a specific account type and payment rail
- Can be referenced by a unique system-generated ID

## Prerequisites

Before creating external accounts, ensure you have:

- An active Grid API account with API credentials
- At least one customer created in the system
- Valid bank account or wallet information for the destination
- Beneficiary information meeting compliance requirements

## Supported account types

Grid supports multiple account types for different currencies and payment rails:

### United States (ACH, Wire, RTP)

US bank accounts supporting multiple payment rails including ACH,le wire transfers, and RTP (Real-Time Payments):

```json
{
  "accountType": "US_ACCOUNT",
  "accountNumber": "123456789",
  "routingNumber": "021000021",
  "accountCategory": "CHECKING",
  "bankName": "Chase Bank",
  "accountHolderName": "John Doe"
}
```

<Note>
  - Account category must be either `CHECKING` or `SAVINGS` - Routing numbers
  must be exactly 9 digits - **ACH and RTP** use the standard routing and
  account number - **Wire transfers** may require additional bank details (bank
  address) which Grid handles based on the routing number and bank name provided
</Note>

### Mexico (CLABE/SPEI)

Mexican bank accounts using 18-digit CLABE numbers:

```json
{
  "accountType": "CLABE",
  "clabeNumber": "123456789012345678",
  "bankName": "BBVA Mexico",
  "accountHolderName": "María García"
}
```

### Brazil (PIX)

Brazilian instant payment accounts using PIX keys:

```json
{
  "accountType": "PIX",
  "pixKey": "user@email.com",
  "pixKeyType": "EMAIL",
  "bankName": "Nubank",
  "accountHolderName": "João Silva"
}
```

<Tip>PIX key types include: `CPF`, `CNPJ`, `EMAIL`, `PHONE`, or `RANDOM`.</Tip>

### Europe (IBAN/SEPA)

European bank accounts using IBAN numbers:

```json
{
  "accountType": "IBAN",
  "iban": "DE89370400440532013000",
  "swiftBic": "DEUTDEFF",
  "bankName": "Deutsche Bank",
  "accountHolderName": "Hans Schmidt"
}
```

### India (UPI)

Indian Unified Payments Interface accounts:

```json
{
  "accountType": "UPI",
  "vpa": "user@okbank",
  "accountHolderName": "Priya Sharma"
}
```

### Cryptocurrency (Spark Wallet)

Bitcoin Lightning wallets for instant cryptocurrency payments:

```json
{
  "accountType": "SPARK_WALLET",
  "address": "sprt1pgssyuuuhnrrdjswal5c3s3rafw9w3y5dd4cjy3duxlf7hjzkp0rqx6dj6mrhu"
}
```

## Creating external accounts

### Basic account creation

To register a new external account, provide the beneficiary information and account details:

<CodeGroup>
```bash cURL
curl -X POST 'https://api.lightspark.com/grid/2025-10-13/external-accounts' \
  -H 'Authorization: Basic <base64-encoded-credentials>' \
  -H 'Content-Type: application/json' \
  -d '{
    "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
    "beneficiary": {
      "counterPartyType": "INDIVIDUAL",
      "fullName": "John Doe",
      "email": "john.doe@example.com"
    },
    "accountInfo": {
      "accountType": "US_ACCOUNT",
      "accountNumber": "123456789",
      "routingNumber": "021000021",
      "accountCategory": "CHECKING",
      "bankName": "Chase Bank",
      "accountHolderName": "John Doe"
    }
  }'
```

```javascript Node.js
const response = await fetch(
  "https://api.lightspark.com/grid/2025-10-13/external-accounts",
  {
    method: "POST",
    headers: {
      Authorization: `Basic ${Buffer.from(
        `${apiTokenId}:${apiSecret}`
      ).toString("base64")}`,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      customerId: "Customer:019542f5-b3e7-1d02-0000-000000000001",
      beneficiary: {
        counterPartyType: "INDIVIDUAL",
        fullName: "John Doe",
        email: "john.doe@example.com",
      },
      accountInfo: {
        accountType: "US_ACCOUNT",
        accountNumber: "123456789",
        routingNumber: "021000021",
        accountCategory: "CHECKING",
        bankName: "Chase Bank",
        accountHolderName: "John Doe",
      },
    }),
  }
);

const externalAccount = await response.json();
console.log("External account created:", externalAccount.id);
```

```python Python
import requests
import base64
import json

credentials = base64.b64encode(
    f"{api_token_id}:{api_secret}".encode()
).decode()

response = requests.post(
    'https://api.lightspark.com/grid/2025-10-13/external-accounts',
    headers={
        'Authorization': f'Basic {credentials}',
        'Content-Type': 'application/json'
    },
    json={
        'customerId': 'Customer:019542f5-b3e7-1d02-0000-000000000001',
        'beneficiary': {
            'counterPartyType': 'INDIVIDUAL',
            'fullName': 'John Doe',
            'email': 'john.doe@example.com'
        },
        'accountInfo': {
            'accountType': 'US_ACCOUNT',
            'accountNumber': '123456789',
            'routingNumber': '021000021',
            'accountCategory': 'CHECKING',
            'bankName': 'Chase Bank',
            'accountHolderName': 'John Doe'
        }
    }
)

external_account = response.json()
print(f"External account created: {external_account['id']}")
```

</CodeGroup>

**Response:**

```json
{
  "id": "ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "status": "ACTIVE",
  "beneficiary": {
    "counterPartyType": "INDIVIDUAL",
    "fullName": "John Doe",
    "email": "john.doe@example.com"
  },
  "accountInfo": {
    "accountType": "US_ACCOUNT",
    "accountNumber": "123456789",
    "routingNumber": "021000021",
    "accountCategory": "CHECKING",
    "bankName": "Chase Bank",
    "accountHolderName": "John Doe"
  }
}
```

### Business beneficiaries

For business accounts, provide additional business information:

```json
{
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "beneficiary": {
    "counterPartyType": "BUSINESS",
    "email": "accounting@acmecorp.com",
    "address": {
      "streetAddress": "123 Business Ave",
      "city": "New York",
      "state": "NY",
      "postalCode": "10001",
      "country": "US"
    },
    "businessInfo": {
      "legalName": "Acme Corporation, Inc.",
      "registrationNumber": "BRN-123456789",
      "taxId": "EIN-987654321"
    }
  },
  "accountInfo": {
    "accountType": "US_ACCOUNT",
    "accountNumber": "987654321",
    "routingNumber": "021000021",
    "accountCategory": "CHECKING",
    "bankName": "Chase Bank",
    "accountHolderName": "Acme Corporation"
  }
}
```

### Using platform account IDs

Track external accounts in your internal systems using optional `platformAccountId`:

```json
{
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "platformAccountId": "user_123_primary_bank",
  "beneficiary": {
    "counterPartyType": "INDIVIDUAL",
    "fullName": "Jane Smith",
    "email": "jane@example.com"
  },
  "accountInfo": {
    "accountType": "US_ACCOUNT",
    "accountNumber": "555666777",
    "routingNumber": "021000021",
    "accountCategory": "SAVINGS",
    "bankName": "Bank of America",
    "accountHolderName": "Jane Smith"
  }
}
```

<Tip>
  Use `platformAccountId` to link external accounts with your internal database
  IDs, making it easier to reconcile transactions and manage multiple accounts
  per customer.
</Tip>

## Understanding account status

External accounts progress through different statuses:

| Status         | Description                                  |
| -------------- | -------------------------------------------- |
| `PENDING`      | Account created but awaiting verification    |
| `ACTIVE`       | Account verified and ready for transactions  |
| `UNDER_REVIEW` | Additional review required before activation |
| `INACTIVE`     | Account disabled and cannot be used          |

<Warning>
  Only `ACTIVE` external accounts can be used as destinations in transfers and
  quotes. Transactions to accounts in other statuses will be rejected.
</Warning>

## Using external accounts in payments

### Same-currency transfers

For transfers in the same currency (no exchange needed), use the `/transfer-out` endpoint:

```javascript
// Transfer from internal account to external account (same currency)
const response = await fetch(
  "https://api.lightspark.com/grid/2025-10-13/transfer-out",
  {
    method: "POST",
    headers: {
      Authorization: `Basic ${credentials}`,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      source: {
        accountId: "InternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
      },
      destination: {
        accountId: "ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
      },
      amount: 50000, // $500.00 in cents
    }),
  }
);

const transaction = await response.json();
```

### Cross-currency transfers

For transfers requiring currency exchange, create a quote first:

```javascript
// Step 1: Create quote for cross-currency transfer
const quoteResponse = await fetch(
  "https://api.lightspark.com/grid/2025-10-13/quotes",
  {
    method: "POST",
    headers: {
      Authorization: `Basic ${credentials}`,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      source: {
        accountId: "InternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
      },
      destination: {
        accountId: "ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
        currency: "MXN",
      },
      lockedCurrencySide: "RECEIVING",
      lockedCurrencyAmount: 1000000, // 10,000 MXN
      description: "Payment to Mexico bank account",
    }),
  }
);

const quote = await quoteResponse.json();

// Step 2: Execute the quote
const executeResponse = await fetch(
  `https://api.lightspark.com/grid/2025-10-13/quotes/${quote.id}/execute`,
  {
    method: "POST",
    headers: {
      Authorization: `Basic ${credentials}`,
      "Content-Type": "application/json",
    },
  }
);
```

### Looking up payment details

Before creating a quote, you can look up an external account to see supported currencies and exchange rates:

```bash
curl -X GET 'https://api.lightspark.com/grid/2025-10-13/receiver/external-account/ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965?customerId=Customer:019542f5-b3e7-1d02-0000-000000000001' \
  -H 'Authorization: Basic <base64-encoded-credentials>'
```

This returns available currencies, exchange rates, and minimum/maximum transfer amounts for the destination account.

## Common use cases

### International payouts

Support global payments by registering accounts in different countries:

```javascript
// Register accounts for international contractor payments
const contractors = [
  { country: "MX", accountType: "CLABE", clabeNumber: "..." },
  { country: "BR", accountType: "PIX", pixKey: "...", pixKeyType: "CPF" },
  { country: "IN", accountType: "UPI", vpa: "contractor@bank" },
];

for (const contractor of contractors) {
  const externalAccount = await createExternalAccount({
    customerId: contractor.customerId,
    beneficiary: contractor.beneficiaryInfo,
    accountInfo: contractor,
  });

  // Store the external account ID for future payouts
  await saveContractorPaymentMethod(contractor.id, externalAccount.id);
}
```

### Cryptocurrency withdrawals

Enable customers to withdraw to their cryptocurrency wallets:

```javascript
// Add Bitcoin Lightning wallet as external account
const cryptoAccount = await createExternalAccount({
  customerId: customerId,
  beneficiary: {
    counterPartyType: "INDIVIDUAL",
    fullName: customerName,
    email: customerEmail,
  },
  accountInfo: {
    accountType: "SPARK_WALLET",
    address: sparkWalletAddress,
  },
});

// Later, send crypto withdrawal
await createQuote({
  source: {
    accountId: internalAccountId,
  },
  destination: {
    accountId: cryptoAccount.id,
    currency: "BTC",
  },
  lockedCurrencySide: "SENDING",
  lockedCurrencyAmount: usdAmountInCents,
});
```

## Best practices

<AccordionGroup>
<Accordion title="Validate account information before submission">
Implement client-side validation for account numbers and routing information:

```javascript
function validateUSAccount(accountNumber, routingNumber) {
  // Routing number must be exactly 9 digits
  if (!/^\d{9}$/.test(routingNumber)) {
    throw new Error("Routing number must be 9 digits");
  }

  // Account number validation (basic length check)
  if (accountNumber.length < 4 || accountNumber.length > 17) {
    throw new Error("Account number length invalid");
  }

  return true;
}

function validateCLABE(clabeNumber) {
  // CLABE must be exactly 18 digits
  if (!/^\d{18}$/.test(clabeNumber)) {
    throw new Error("CLABE must be 18 digits");
  }

  // Add checksum validation if needed
  return true;
}
```

</Accordion>

<Accordion title="Handle account status appropriately">
Always check account status before attempting transfers:

```javascript
async function sendWithdrawal(externalAccountId, amount) {
  // Fetch current account status
  const accounts = await listExternalAccounts({ customerId });
  const account = accounts.data.find((a) => a.id === externalAccountId);

  if (!account) {
    throw new Error("External account not found");
  }

  if (account.status !== "ACTIVE") {
    throw new Error(`Account is ${account.status} and cannot receive payments`);
  }

  // Proceed with transfer
  return await createTransferOut({
    source: { accountId: internalAccountId },
    destination: { accountId: externalAccountId },
    amount: amount,
  });
}
```

</Accordion>

<Accordion title="Store external account IDs securely">
Never expose full account numbers in your UI. Use the external account ID as the reference:

```javascript
// Good: Display masked account info with external account ID
function displayAccountSafely(externalAccount) {
  return {
    id: externalAccount.id,
    bankName: externalAccount.accountInfo.bankName,
    lastFourDigits: externalAccount.accountInfo.accountNumber.slice(-4),
    accountType: externalAccount.accountInfo.accountCategory,
    status: externalAccount.status,
  };
}

// Store only the external account ID in your transactions
await saveTransaction({
  userId: userId,
  externalAccountId: externalAccount.id, // Reference only
  amount: amount,
  timestamp: Date.now(),
});
```

</Accordion>

<Accordion title="Use platformAccountId for reconciliation">
Leverage `platformAccountId` to link external accounts with your internal systems:

```javascript
// When creating accounts, use your internal ID
const externalAccount = await createExternalAccount({
  customerId: gridCustomerId,
  platformAccountId: `db_account_${yourDatabaseId}`,
  beneficiary: beneficiaryInfo,
  accountInfo: accountInfo,
});

// Later, easily find the Grid external account from your ID
const accounts = await listExternalAccounts({ customerId: gridCustomerId });
const matchingAccount = accounts.data.find(
  (acc) => acc.platformAccountId === `db_account_${yourDatabaseId}`
);
```

</Accordion>
</AccordionGroup>

## Next steps

<CardGroup cols={2}>
<Card title="Plaid integration" icon="link" href="/pay-to-bank/depositing-funds/plaid">
  Simplify external account setup with Plaid Link for instant bank verification
</Card>

<Card
  title="Cross-currency transfers"
  icon="earth-americas"
  href="/pay-to-bank/getting-started/cross-currency-transfers"
>
  Learn how to send international payments using external accounts
</Card>

<Card
  title="Rails by country"
  icon="flag"
  href="/pay-to-bank/developer-guides/rails-by-country"
>
  See supported payment rails and account types by destination country
</Card>

<Card title="API Reference" icon="code" href="/api-reference">
  View complete API documentation for external accounts
</Card>
</CardGroup>
