---
title: "Send to a Foreign Bank Account"
description: "Complete walkthrough for adding a customer, funding an internal account, and sending funds from an internal account to an external bank account in a foreign currency"
---

This guide walks you through the complete process of sending funds to an external bank account, from customer onboarding through quote execution.

## Prerequisites

Before starting this guide, ensure you have:

- A Grid API account with valid authentication credentials
- Access to the Grid API endpoints (production or sandbox)
- A webhook endpoint configured to receive notifications

## Overview

The process consists of the following steps:

1. **Create a customer** using the hosted KYC link flow
2. **List internal accounts** to find the customer's funding instructions
3. **Fund the internal account** via ACH pull and receive a webhook notification
4. **Add an external bank account** for the destination
5. **Look up the external account** to verify supported currencies
6. **Create a quote** to lock in exchange rates and fees
7. **Execute the quote** to complete the transfer

## Step 1: Create a Customer with KYC Link

First, generate a hosted KYC link that your customer can use to complete their onboarding. This link provides a secure, hosted flow where the customer can submit their information.

### Request

```http
GET /customers/kyc-link?redirect_uri=https://yourapp.com/onboarding-complete
Authorization: Basic <base64-encoded-credentials>
```

### Response

```json
{
  "kycUrl": "https://kyc.lightspark.com/onboard/abc123def456"
}
```

The customer should be redirected to this URL to complete their KYC information. Once completed, they'll be redirected to your specified `redirect_uri`.

After the customer completes KYC, Grid will create their customer account and automatically provision internal accounts based on your platform configuration. You'll receive the customer ID through your onboarding flow.

For this example, let's assume the customer ID is: `Customer:019542f5-b3e7-1d02-0000-000000000001`

## Step 2: List Internal Accounts

Once the customer is created, list their internal accounts to see the available balances and funding instructions.

### Request

```http
GET /internal-account?customerId=Customer:019542f5-b3e7-1d02-0000-000000000001
Authorization: Basic <base64-encoded-credentials>
```

### Response

```json
{
  "data": [
    {
      "id": "InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
      "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
      "balance": {
        "amount": 0,
        "currency": {
          "code": "USD",
          "name": "United States Dollar",
          "symbol": "$",
          "decimals": 2
        }
      },
      "fundingPaymentInstructions": [
        {
          "reference": "FUND-ABC123",
          "instructionsNotes": "Include the reference code in your ACH transfer memo",
          "bankAccountInfo": {
            "accountType": "US_ACCOUNT",
            "accountNumber": "9876543210",
            "routingNumber": "021000021",
            "accountHolderName": "Lightspark Grid FBO John Doe",
            "bankName": "JP Morgan Chase"
          }
        }
      ],
      "createdAt": "2025-10-03T12:00:00Z",
      "updatedAt": "2025-10-03T12:00:00Z"
    }
  ],
  "hasMore": false,
  "totalCount": 1
}
```

The `fundingPaymentInstructions` provide the bank account details and reference code needed to fund this internal account via ACH pull from the customer's bank.

## Step 3: Fund the Internal Account

Your customer initiates an ACH transfer from their bank to the account details provided in the funding instructions, making sure to include the reference code `FUND-ABC123` in the transfer memo.

<Note>
  In sandbox mode, you can use the `/sandbox/receive` endpoint to simulate receiving funds. In production, actual ACH transfers typically take 1-3 business days to settle.
</Note>

### Webhook Notification

When the funds are received and the internal account balance is updated, you'll receive a webhook notification:

```json
{
  "transaction": {
    "id": "Transaction:019542f5-b3e7-1d02-0000-000000000010",
    "status": "COMPLETED",
    "type": "INCOMING",
    "receivedAmount": {
      "amount": 100000,
      "currency": {
        "code": "USD",
        "name": "United States Dollar",
        "symbol": "$",
        "decimals": 2
      }
    },
    "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
    "settledAt": "2025-10-03T14:30:00Z",
    "createdAt": "2025-10-03T14:25:00Z",
    "description": "Internal account funding"
  },
  "timestamp": "2025-10-03T14:32:00Z",
  "webhookId": "Webhook:019542f5-b3e7-1d02-0000-000000000020",
  "type": "INCOMING_PAYMENT"
}
```

The internal account now has a balance of $1,000.00 (100000 cents).

## Step 4: Add an External Bank Account

Now add the destination bank account where you want to send the funds. In this example, we'll add a Mexican CLABE account.

### Request

```http
POST /external-accounts
Authorization: Basic <base64-encoded-credentials>
Content-Type: application/json
```

```json
{
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "currency": "MXN",
  "beneficiary": {
    "counterPartyType": "INDIVIDUAL",
    "fullName": "Maria Garcia",
    "dateOfBirth": "1990-01-01",
    "nationality": "MX",
  },
  "accountInfo": {
    "accountType": "CLABE",
    "clabeNumber": "123456789012345678",
    "bankName": "BBVA Mexico",
    "accountHolderName": "Maria Garcia"
  }
}
```

### Response

```json
{
  "id": "ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "status": "ACTIVE",
  "beneficiary": {
    "counterPartyType": "INDIVIDUAL",
    "fullName": "Maria Garcia",
    "dateOfBirth": "1990-01-01",
    "nationality": "MX",
  },
  "accountInfo": {
    "accountType": "CLABE",
    "clabeNumber": "123456789012345678",
    "bankName": "BBVA Mexico",
    "accountHolderName": "Maria Garcia"
  }
}
```

## Step 5: Look Up the External Account

Before creating a quote, look up the external account to verify supported currencies and get estimated exchange rates.

### Request

```http
GET /receiver/external-account/ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123?customerId=Customer:019542f5-b3e7-1d02-0000-000000000001
Authorization: Basic <base64-encoded-credentials>
```

### Response

```json
{
  "accountId": "ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
  "supportedCurrencies": [
    {
      "currency": {
        "code": "MXN",
        "name": "Mexican Peso",
        "symbol": "$",
        "decimals": 2
      },
      "estimatedExchangeRate": 17.25,
      "min": 1000,
      "max": 1000000
    }
  ],
  "lookupId": "LookupRequest:019542f5-b3e7-1d02-0000-000000000009"
}
```

This shows you can send MXN to this account, with an estimated exchange rate of 17.25 MXN per 1 USD. The minimum send amount is 10.00 MXN and maximum is 10,000.00 MXN.

## Step 6: Create a Quote

Create a quote to lock in the exchange rate, fees, and get the final transfer details.

### Request

```http
POST /quotes
Authorization: Basic <base64-encoded-credentials>
Content-Type: application/json
```

```json
{
  "lookupId": "LookupRequest:019542f5-b3e7-1d02-0000-000000000009",
  "source": {
    "accountId": "InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965"
  },
  "destination": {
    "accountId": "ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
    "currency": "MXN"
  },
  "lockedCurrencySide": "SENDING",
  "lockedCurrencyAmount": 50000,
  "description": "Payment to Maria Garcia for services"
}
```

<Note>
  **Amount Locking**: You can lock either the sending amount (`SENDING`) or receiving amount (`RECEIVING`). In this example, we're locking the sending amount to exactly $500.00 USD (50000 cents).
</Note>

### Response

```json
{
  "quoteId": "Quote:019542f5-b3e7-1d02-0000-000000000006",
  "status": "PENDING",
  "createdAt": "2025-10-03T15:00:00Z",
  "expiresAt": "2025-10-03T15:05:00Z",
  "source": {
    "accountId": "InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
    "currency": "USD"
  },
  "destination": {
    "accountId": "ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
    "currency": "MXN"
  },
  "sendingCurrency": {
    "code": "USD",
    "name": "United States Dollar",
    "symbol": "$",
    "decimals": 2
  },
  "receivingCurrency": {
    "code": "MXN",
    "name": "Mexican Peso",
    "symbol": "$",
    "decimals": 2
  },
  "totalSendingAmount": 50000,
  "totalReceivingAmount": 861250,
  "exchangeRate": 17.25,
  "feesIncluded": 250,
  "transactionId": "Transaction:019542f5-b3e7-1d02-0000-000000000015"
}
```

The quote shows:
- **Sending**: \$500.00 USD (including $2.50 fee)
- **Receiving**: $8,612.50 MXN
- **Exchange rate**: 17.25 MXN per USD
- **Quote expires**: In 5 minutes

<Warning>
  Quotes typically expire in 1-5 minutes. Make sure to execute the quote before the `expiresAt` timestamp, or you'll need to create a new quote.
</Warning>

## Step 7: Execute the Quote

Execute the quote to initiate the transfer from the internal account to the external bank account.

### Request

```http
POST /quotes/Quote:019542f5-b3e7-1d02-0000-000000000006/execute
Authorization: Basic <base64-encoded-credentials>
```

### Response

```json
{
  "quoteId": "Quote:019542f5-b3e7-1d02-0000-000000000006",
  "status": "PROCESSING",
  "createdAt": "2025-10-03T15:00:00Z",
  "expiresAt": "2025-10-03T15:05:00Z",
  "source": {
    "accountId": "InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
    "currency": "USD"
  },
  "destination": {
    "accountId": "ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
    "currency": "MXN"
  },
  "sendingCurrency": {
    "code": "USD",
    "name": "United States Dollar",
    "symbol": "$",
    "decimals": 2
  },
  "receivingCurrency": {
    "code": "MXN",
    "name": "Mexican Peso",
    "symbol": "$",
    "decimals": 2
  },
  "totalSendingAmount": 50000,
  "totalReceivingAmount": 861250,
  "exchangeRate": 17.25,
  "feesIncluded": 250,
  "transactionId": "Transaction:019542f5-b3e7-1d02-0000-000000000015"
}
```

The quote status changes to `PROCESSING` and the transfer is initiated. You can track the status by:
1. Polling the quote endpoint: `GET /quotes/{quoteId}`
2. Waiting for a webhook notification

### Completion Webhook

When the transfer completes, you'll receive a webhook notification:

```json
{
  "transaction": {
    "id": "Transaction:019542f5-b3e7-1d02-0000-000000000015",
    "status": "COMPLETED",
    "type": "OUTGOING",
    "sentAmount": {
      "amount": 50000,
      "currency": {
        "code": "USD",
        "name": "United States Dollar",
        "symbol": "$",
        "decimals": 2
      }
    },
    "receivedAmount": {
      "amount": 861250,
      "currency": {
        "code": "MXN",
        "name": "Mexican Peso",
        "symbol": "$",
        "decimals": 2
      }
    },
    "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
    "settledAt": "2025-10-03T15:02:30Z",
    "createdAt": "2025-10-03T15:00:00Z",
    "description": "Payment to Maria Garcia for services",
    "exchangeRate": 17.25,
    "quoteId": "Quote:019542f5-b3e7-1d02-0000-000000000006"
  },
  "timestamp": "2025-10-03T15:03:00Z",
  "webhookId": "Webhook:019542f5-b3e7-1d02-0000-000000000025",
  "type": "OUTGOING_PAYMENT"
}
```

## Summary

You've successfully completed a transfer from an internal account to an external bank account! Here's what happened:

1. ✅ Created a customer via hosted KYC flow
2. ✅ Listed internal accounts and obtained funding instructions
3. ✅ Funded the internal account via ACH pull
4. ✅ Added an external CLABE bank account in Mexico
5. ✅ Looked up the external account to verify currencies
6. ✅ Created a quote with locked exchange rate
7. ✅ Executed the quote to complete the transfer

## Next Steps

- **Multiple currencies**: Add external accounts in different currencies to enable multi-currency transfers
- **Same-currency transfers**: Use `/transfer-in` and `/transfer-out` for same-currency transfers without exchange
- **Transaction history**: Use `GET /transactions` to retrieve and filter transaction history
- **Webhook verification**: Implement signature verification for webhook security (see [Webhooks guide](/uma-connect/developer-guides/webhooks))

## Related Resources

- [API Reference](/api-reference) - Complete API documentation
- [Platform Configuration](/pay-to-bank/developer-guides/platform-configuration) - Configure your platform settings
- [Webhooks](/uma-connect/developer-guides/webhooks) - Webhook security and verification
- [Sandbox Testing](/uma-connect/developer-guides/sandbox-testing) - Test your integration safely
